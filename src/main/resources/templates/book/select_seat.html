<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf/org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Booking</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/select_seat_css.css">
</head>
<body>
<form th:action="@{/cnema/seat}" method="post">
    <div id="container">
        <ul class="showcase">
            <li>
                <div class="availableSeat"></div>
                <small class="small">Available Seat</small>
            </li>
            <li>
                <div class="selectedSeatIcon"></div>
                <small class="small">Selected Seat</small>
            </li>
            <li>
                <div class="occupiedSeat"></div>
                <small class="small">Occupied Seat</small>
            </li>
        </ul>

        <div th:each="row, rowStat : ${seats}" class="row">
        <span th:each="seatStatus, colStat : ${row}"
              th:class="${seatStatus} ? 'seat' : 'occupiedSeat'"
              th:attr="data-row=${rowStat.index}, data-column=${colStat.index}"
              onclick="selectSeat(this)">
        </span>
        </div>


        <p class="text">You have selected <span id="count">0</span> seats for a price of $ <span id="costs">0</span></p>

        <input type="submit" value="예매" class="next">
        <a href="/cnema">
            <input type="button" value="메인으로" class="back">
        </a>

    </div>
</form>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        const seats = document.querySelectorAll('.seat');

        seats.forEach(seat => {
            seat.addEventListener('click', () => {
                if (!seat.classList.contains('selectedSeatIcon')) {
                    seat.classList.add('selectedSeatIcon');
                    seat.classList.remove('seat');
                } else {
                    seat.classList.remove('selectedSeatIcon');
                    seat.classList.add('seat');
                }
            });
        });
    });


</script>


</script>
</body>

</html>